---
import TikTokVideo from '../components/TikTokVideo.astro'
import BlogPost from '../components/BlogPost.astro'
import { TIKTOK_VIDEOS } from '../constants/tiktok-videos'
import { SOCIAL_LINKS } from '../consts'
import MainLayout from '../layouts/MainLayout.astro'
import { getCollection } from 'astro:content'

const socialLinks = SOCIAL_LINKS
const videos = TIKTOK_VIDEOS

// Obtener los Ãºltimos 3 posts
const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3)
---

<MainLayout>
  <main class='container mx-auto px-4 py-8'>
    <!-- SecciÃ³n Hero -->
    <section class='text-center mb-16'>
      <h1 class='text-5xl font-bold mb-4'>Â¡Hola! ðŸ‘‹</h1>
      <p class='text-xl text-gray-600 max-w-2xl mx-auto'>
        Bienvenido a mi espacio digital donde comparto conocimiento sobre
        finanzas, inversiones y blockchain.
      </p>
    </section>

    <!-- Redes Sociales -->
    <section class='flex justify-center gap-6 mb-16'>
      {
        socialLinks.map((link) => (
          <a
            href={link.href}
            class='text-2xl hover:text-blue-500 transition-colors'
          >
            {link.icon} {link.text}
          </a>
        ))
      }
    </section>

    <!-- Ãšltimos Posts -->
    <section class='mb-16'>
      <h2 class='text-3xl font-bold mb-6'>Ãšltimos Posts</h2>
      <div class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'>
        {
          posts.map((post) => (
            <BlogPost
              title={post.data.title}
              pubDate={post.data.pubDate}
              heroImage={post.data.heroImage || '/default-hero.jpg'}
              slug={post.id}
              categories={Array.isArray(post.data.category) ? post.data.category : [post.data.category]}
            />
          ))
        }
      </div>
    </section>

    <!-- Ãšltimos Videos -->
    <section class='mb-16'>
      <h2 class='text-3xl font-bold mb-6'>Ãšltimos Videos</h2>
      <section
        class='grid grid-cols-1 md:grid-cols-[1fr_1fr]'
        id='videos-container'
      >
        {
          videos.map((video) => (
            <TikTokVideo
              url={video.url}
              title={video.title}
              category={video.category}
            />
          ))
        }
      </section>
    </section>
  </main>
</MainLayout>
