---
import MainLayout from '../layouts/MainLayout.astro'
import Dashboard from '../components/Dashboard/Dashboard'
import { supabase } from '../db/supabase'

// Verificar si hay una sesión válida
const {
  data: { session }
} = await supabase.auth.getSession()

if (!session) {
  return Astro.redirect(
    '/signin?error=' +
      encodeURIComponent('Debes iniciar sesión para acceder al dashboard')
  )
}
---

<MainLayout
  title='Dashboard'
  description='CRUD de Artículos'
  dashboard={true}
>
  <Dashboard client:load />
</MainLayout>

<style>
  body {
    background-color: #f3f4f6;
  }
</style>
